{"ast":null,"code":"// src/components/ConversationStarterGame.js\nimport React,{useState,useEffect,useCallback}from'react';import startersData from'../mock/conversation_starters_data.json';// Importa los datos\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ConversationStarterGame(_ref){let{players,onExitGame}=_ref;const[currentStarter,setCurrentStarter]=useState(null);const[availableStarters,setAvailableStarters]=useState([]);// Modificación de la función para determinar las audiencias aplicables\nconst getApplicableAudiences=useCallback(()=>{const hasChildren=players.childPlayers>0;const hasAdults=players.adultPlayers>0;let audiences=['General'];// 'General' siempre está incluido\nif(hasChildren){audiences.push('Niños');// Si hay niños, incluye temas para niños\n}else if(hasAdults&&!hasChildren){// Si solo hay adultos (y no niños)\naudiences.push('Adultos');// Incluye temas para adultos\n}// Si hay adultos Y niños, solo se incluyen 'General' y 'Niños' por la primera condición 'if (hasChildren)'.\n// Esto es lo que quieres: \"Si hay al menos un Niño, la audiencia debe ser General y Niños\"\nreturn audiences;},[players.childPlayers,players.adultPlayers]);// Dependencias específicas\n// Función para obtener un tema aleatorio\nconst getRandomStarter=useCallback(()=>{if(availableStarters.length===0){console.warn(\"No hay temas disponibles.\");return null;}const randomIndex=Math.floor(Math.random()*availableStarters.length);return availableStarters[randomIndex];},[availableStarters]);// Efecto para cargar y filtrar los temas al inicio o cuando cambian los jugadores\nuseEffect(()=>{const applicableAudiences=getApplicableAudiences();// Obtiene el array de audiencias\nconst filteredStarters=startersData.filter(starter=>applicableAudiences.includes(starter.Audiencia)// Filtra si la audiencia del tema está en las aplicables\n);// Evitar actualización innecesaria si la lista filtrada no ha cambiado\n// Esto es importante para que el `currentStarter` no se resetee si la lista es la misma\nconst currentAvailableStartersJSON=JSON.stringify(availableStarters);const newFilteredStartersJSON=JSON.stringify(filteredStarters);if(newFilteredStartersJSON!==currentAvailableStartersJSON){setAvailableStarters(filteredStarters);// Al actualizar la lista, reinicia el tema actual para asegurar que se muestre uno válido de la nueva lista\nif(filteredStarters.length>0){setCurrentStarter(filteredStarters[Math.floor(Math.random()*filteredStarters.length)]);}else{setCurrentStarter(null);// No hay temas disponibles\n}}// Si la lista no ha cambiado pero no hay currentStarter (ej. primera carga), selecciona uno\nelse if(currentStarter===null&&filteredStarters.length>0){setCurrentStarter(filteredStarters[Math.floor(Math.random()*filteredStarters.length)]);}},[getApplicableAudiences,availableStarters,currentStarter]);// Dependencias para re-ejecutar el efecto\n// Manejador para el botón \"Siguiente\"\nconst handleNextTopic=()=>{const nextStarter=getRandomStarter();if(nextStarter){setCurrentStarter(nextStarter);}else{console.warn(\"No hay más temas para mostrar. Considera reiniciar el juego.\");}};// Manejador para el botón \"A comer\"\nconst handleExitToGameSelector=()=>{if(onExitGame){onExitGame();// Llama a la función proporcionada por App.js para regresar\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"game-container bg-white p-6 rounded-lg shadow-md text-center relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleExitToGameSelector,className:\"absolute top-4 left-4 bg-gray-200 hover:bg-gray-300 p-2 rounded-full text-xl\",children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-8 text-gray-800\",children:\"Iniciador de Conversaci\\xF3n\"}),currentStarter?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"my-10 p-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 min-h-32 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-4xl font-semibold text-blue-700 leading-tight\",children:[\"\\\"\",currentStarter.Tema,\"\\\"\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-4 mt-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleNextTopic,className:\"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-xl transition duration-300\",children:\"Siguiente\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleExitToGameSelector,className:\"bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-6 rounded-lg text-xl transition duration-300\",children:\"A comer\"})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 text-xl my-8\",children:\"Cargando temas...\"})]});}export default ConversationStarterGame;","map":{"version":3,"names":["React","useState","useEffect","useCallback","startersData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ConversationStarterGame","_ref","players","onExitGame","currentStarter","setCurrentStarter","availableStarters","setAvailableStarters","getApplicableAudiences","hasChildren","childPlayers","hasAdults","adultPlayers","audiences","push","getRandomStarter","length","console","warn","randomIndex","Math","floor","random","applicableAudiences","filteredStarters","filter","starter","includes","Audiencia","currentAvailableStartersJSON","JSON","stringify","newFilteredStartersJSON","handleNextTopic","nextStarter","handleExitToGameSelector","className","children","onClick","Tema"],"sources":["D:/Proyectos Code/project/src/components/ConversationStarterGame.js"],"sourcesContent":["// src/components/ConversationStarterGame.js\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport startersData from '../mock/conversation_starters_data.json'; // Importa los datos\r\n\r\nfunction ConversationStarterGame({ players, onExitGame }) {\r\n  const [currentStarter, setCurrentStarter] = useState(null);\r\n  const [availableStarters, setAvailableStarters] = useState([]);\r\n\r\n  // Modificación de la función para determinar las audiencias aplicables\r\n  const getApplicableAudiences = useCallback(() => {\r\n    const hasChildren = players.childPlayers > 0;\r\n    const hasAdults = players.adultPlayers > 0;\r\n\r\n    let audiences = ['General']; // 'General' siempre está incluido\r\n\r\n    if (hasChildren) {\r\n      audiences.push('Niños'); // Si hay niños, incluye temas para niños\r\n    } else if (hasAdults && !hasChildren) { // Si solo hay adultos (y no niños)\r\n      audiences.push('Adultos'); // Incluye temas para adultos\r\n    }\r\n    // Si hay adultos Y niños, solo se incluyen 'General' y 'Niños' por la primera condición 'if (hasChildren)'.\r\n    // Esto es lo que quieres: \"Si hay al menos un Niño, la audiencia debe ser General y Niños\"\r\n\r\n    return audiences;\r\n  }, [players.childPlayers, players.adultPlayers]); // Dependencias específicas\r\n\r\n  // Función para obtener un tema aleatorio\r\n  const getRandomStarter = useCallback(() => {\r\n    if (availableStarters.length === 0) {\r\n      console.warn(\"No hay temas disponibles.\");\r\n      return null;\r\n    }\r\n    const randomIndex = Math.floor(Math.random() * availableStarters.length);\r\n    return availableStarters[randomIndex];\r\n  }, [availableStarters]);\r\n\r\n  // Efecto para cargar y filtrar los temas al inicio o cuando cambian los jugadores\r\n  useEffect(() => {\r\n    const applicableAudiences = getApplicableAudiences(); // Obtiene el array de audiencias\r\n\r\n    const filteredStarters = startersData.filter(\r\n      (starter) => applicableAudiences.includes(starter.Audiencia) // Filtra si la audiencia del tema está en las aplicables\r\n    );\r\n\r\n    // Evitar actualización innecesaria si la lista filtrada no ha cambiado\r\n    // Esto es importante para que el `currentStarter` no se resetee si la lista es la misma\r\n    const currentAvailableStartersJSON = JSON.stringify(availableStarters);\r\n    const newFilteredStartersJSON = JSON.stringify(filteredStarters);\r\n\r\n    if (newFilteredStartersJSON !== currentAvailableStartersJSON) {\r\n      setAvailableStarters(filteredStarters);\r\n      // Al actualizar la lista, reinicia el tema actual para asegurar que se muestre uno válido de la nueva lista\r\n      if (filteredStarters.length > 0) {\r\n        setCurrentStarter(filteredStarters[Math.floor(Math.random() * filteredStarters.length)]);\r\n      } else {\r\n        setCurrentStarter(null); // No hay temas disponibles\r\n      }\r\n    }\r\n    // Si la lista no ha cambiado pero no hay currentStarter (ej. primera carga), selecciona uno\r\n    else if (currentStarter === null && filteredStarters.length > 0) {\r\n        setCurrentStarter(filteredStarters[Math.floor(Math.random() * filteredStarters.length)]);\r\n    }\r\n\r\n\r\n  }, [getApplicableAudiences, availableStarters, currentStarter]); // Dependencias para re-ejecutar el efecto\r\n\r\n\r\n  // Manejador para el botón \"Siguiente\"\r\n  const handleNextTopic = () => {\r\n    const nextStarter = getRandomStarter();\r\n    if (nextStarter) {\r\n      setCurrentStarter(nextStarter);\r\n    } else {\r\n      console.warn(\"No hay más temas para mostrar. Considera reiniciar el juego.\");\r\n    }\r\n  };\r\n\r\n  // Manejador para el botón \"A comer\"\r\n  const handleExitToGameSelector = () => {\r\n    if (onExitGame) {\r\n      onExitGame(); // Llama a la función proporcionada por App.js para regresar\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"game-container bg-white p-6 rounded-lg shadow-md text-center relative\">\r\n      {/* Botón de regreso, similar a otros juegos */}\r\n      <button\r\n        onClick={handleExitToGameSelector}\r\n        className=\"absolute top-4 left-4 bg-gray-200 hover:bg-gray-300 p-2 rounded-full text-xl\"\r\n      >\r\n        &#8592;\r\n      </button>\r\n\r\n      <h2 className=\"text-3xl font-bold mb-8 text-gray-800\">Iniciador de Conversación</h2>\r\n\r\n      {currentStarter ? (\r\n        <>\r\n          <div className=\"my-10 p-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 min-h-32 flex items-center justify-center\">\r\n            <p className=\"text-4xl font-semibold text-blue-700 leading-tight\">\r\n              \"{currentStarter.Tema}\"\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex justify-center space-x-4 mt-8\">\r\n            <button\r\n              onClick={handleNextTopic}\r\n              className=\"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-xl transition duration-300\"\r\n            >\r\n              Siguiente\r\n            </button>\r\n            <button\r\n              onClick={handleExitToGameSelector}\r\n              className=\"bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-6 rounded-lg text-xl transition duration-300\"\r\n            >\r\n              A comer\r\n            </button>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"text-gray-600 text-xl my-8\">Cargando temas...</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ConversationStarterGame;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}